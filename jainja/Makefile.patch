--- jainja-0.8/platforms/c/Makefile	2014-04-19 17:14:26.000000000 +0200
+++ jainja-0.8/platforms/c/Makefile	2017-08-01 15:19:54.523808850 +0200
@@ -7,6 +7,42 @@
     CFLAGS = -O2 -I${SOURCE_HOME}/include -I${SOURCE_HOME}/tinygc -I${SOURCE_HOME}/native -DJCGO_FFDATA -DJCGO_THREAD_SLEEP -DFPINIT -DGC_GETENV_SKIP -DGC_INITIAL_HEAP_SIZE=64*1024*1024 -DGC_MAXIMUM_HEAP_SIZE=128*1024*1024 -DALL_INTERIOR_POINTERS -DGC_GCJ_SUPPORT -DGC_FASTCALL= -DGC_LP_ALLOCATOR -fno-toplevel-reorder -DCFASTCALL= -DJCGO_INET -DJCGO_WIN32 
 	CFILES += ${SOURCE_HOME}/tinygc/LP_Allocator.c ${SOURCE_HOME}/tinygc/tinygc.c -lwsock32
 	EXECUTABLE_EXTENSION = .exe
+else ifeq ($(OS),HelenOS)
+	CFLAGS = \
+		$(CUSTOM_CFLAGS) \
+		-I$(SOURCE_HOME)/include \
+		-I$(SOURCE_HOME)/native \
+		-I$(SOURCE_HOME)/tinygc \
+		-D_IEEEFP_H \
+		-DJCGO_UNIX \
+		-DJCGO_UNIFSYS \
+		-DJCGO_NOSYSNAME \
+		-DEXTRASTATIC=static \
+		-DJNUBIGEXPORT=static \
+		-DJNIIMPORT=static \
+		-DJNIEXPORT=static \
+		-DJCGO_STDCLINIT \
+		-DFPINIT= \
+		-DGC_GETENV_SKIP \
+		-DGC_CLIBDECL= \
+		-DALL_INTERIOR_POINTERS \
+		-DGC_GCJ_SUPPORT \
+		-DCFASTCALL= \
+		-DJCGO_UTFWCTOMB \
+		-DJCGO_CLOCKGETTM \
+		-DJCGO_NOUTIMBUF \
+		-D_SYS_IOCTL_H \
+		-D_SYS_SELECT_H \
+		-D_IO_H \
+		-DJCGO_BIGFLKOFF_T \
+		-D_MATH_NO_HYPOT \
+		-DGC_LP_ALLOCATOR \
+		-DGC_INITIAL_HEAP_SIZE=64*1024*1024 \
+		-DGC_MAXIMUM_HEAP_SIZE=128*1024*1024 \
+		-DGC_FASTCALL= \
+		-DGC_CLIBDECL= \
+		-DGC_GCJ_SUPPORT
+	CFILES += -lfdm ${SOURCE_HOME}/tinygc/LP_Allocator.c ${SOURCE_HOME}/tinygc/tinygc.c
 else
 	CFLAGS = -O2 -I${SOURCE_HOME}/include -I${SOURCE_HOME}/native -I${SOURCE_HOME}/tinygc -DJCGO_UNIX -D_IEEEFP_H  -DJCGO_UNIFSYS -DJCGO_STDCLINIT -DJCGO_THREAD_SLEEP -DFPINIT -DJCGO_INET -DJCGO_SIGSETJMP -DGC_GETENV_SKIP -DGC_LP_ALLOCATOR -DGC_INITIAL_HEAP_SIZE=64*1024*1024 -DGC_MAXIMUM_HEAP_SIZE=128*1024*1024  -DGC_FASTCALL= -DGC_CLIBDECL= -DALL_INTERIOR_POINTERS -DGC_GCJ_SUPPORT -DGC_SIGSETJMP  -DDONT_ADD_BYTE_AT_END -fno-toplevel-reorder -DCFASTCALL= 
     UNAME_S := $(shell uname -s)
